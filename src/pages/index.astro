---
import { Image } from 'astro:assets'
import { getCollection } from 'astro:content'
import familyImg from '@/assets/family.jpeg'
import BlogRow from '@/components/BlogRow.astro'
import SubscribeButton from '@/components/SubscribeButton.astro'
import Container from '@/components/ui/Container.astro'
import Layout from '@/layouts/Layout.astro'
import { compareDesc } from 'date-fns'

const posts = await getCollection('blog', ({ data }) => data.status === 'published')
posts.sort((a, b) => compareDesc(a.data.date, b.data.date))
---

<Layout>
  <Container class="-mt-8">
    <div class="mx-auto mb-4 flex max-w-lg flex-col items-center text-center">
      <div class="relative mb-8">
        <Image
          alt="Engineering with Mert"
          src={familyImg}
          width={150}
          height={150}
          loading="eager"
          class="rounded-full"
        />
      </div>
      <h1 class="sr-only">Mert Can Altin's website</h1>
      <div class="text-lg dark:text-zinc-200">
      Welcome to my personal space! Here you'll find a collection of my thoughts, stories, ideas, and experiences. I am Mert Can AltÄ±n, working at Trendyol with a passion for technology and innovation.
      </div>

      <SubscribeButton />
    </div>
  </Container>

  <div class="flex grow pt-8">
    <Container
      size="tight"
      class="divide-y divide-slate-200 dark:divide-neutral-700"
    >
      {posts.map((post) => <BlogRow {post} />)}
    </Container>
  </div>
</Layout>
